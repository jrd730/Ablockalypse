/* game.cpp
 *
 * Implementation of Game class.
 *
 */

#include "game.h"

// static initializer
Game* Game::callbackInstance(NULL);

Game::Game() {
}

Game::Game(int* argcp, char** argv) {
    init(argcp, argv);
}

Game::~Game() {
	delete ball;
    delete paddle;
}

void Game::init(int* argcp, char** argvp) {
    glutInit(argcp, argvp);
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitContextVersion( 3, 2 );
    glutInitContextProfile( GLUT_CORE_PROFILE );
    glutInitWindowPosition (0, 0);
    glutInitWindowSize (480, 480);
    glutCreateWindow ("Ablockalypse");
    glutSetWindowTitle("Ablockalypse");
    glutSetIconTitle("Ablockalypse");
    glEnable( GL_DEPTH_TEST );
    glClearColor(0, 0, 0, 0); 
}

void Game::initGame() {
    if (callbackInstance == NULL){
        callbackInstance = this;
    }

	// game init code here...
}

void Game::registerCallbacks() {
    glutTimerFunc (15, timerWrapper, 0);
    glutDisplayFunc(displayWrapper);
    glutReshapeFunc(reshapeWrapper);
    glutKeyboardFunc(keyboardWrapper);
}

void Game::run() {
    initGame();
    registerCallbacks();
    glutMainLoop();
}

void Game::display() {
	glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glutSwapBuffers();
}

void Game::displayWrapper() {
    callbackInstance->display();
}

void Game::reshape(int width, int height) {
    // reshape code here...
}

void Game::reshapeWrapper(int width, int height) {
    callbackInstance->reshape(width, height);
}

void Game::keyboard(unsigned char keycode, int x, int y) {
	switch (keycode){

    }
}

void Game::keyboardWrapper(unsigned char keycode, int x, int y) {
    callbackInstance->keyboard(keycode, x, y);
}

void Game::timer (int val)
{
    cout << "val: " << val << endl;
}

void Game::timerWrapper(int val)
{
    callbackInstance->timer(val);
}


